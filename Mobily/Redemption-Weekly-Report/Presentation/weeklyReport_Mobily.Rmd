---
output:
  html_document:
    theme: readable
    toc: yes
    variant: markdown_strict
    css: ~/MobilyWeeklyReport/Presentation/style.css
---



```{r global_options_knitr, include=FALSE, echo = FALSE, warning = FALSE, message = FALSE}

library(knitr)
opts_chunk$set(include = FALSE, echo = FALSE, warning = FALSE, message = FALSE, fig.width = 5, fig.height = 4)

knit_hooks$set(document = function(x){
gsub("</body>", "<div id ='footer'><div class ='container'><p>Weekly Analytics Report Generated by Aimia Analytics Team</p></div></div> </body>",x , fixed = TRUE)
})

```

```{r loadLibs}

source(file = '~/MobilyWeeklyReport/Data/loadPackages.R')

```

```{r loadData, cache = FALSE}

source(file = '~/MobilyWeeklyReport/Data/readPrepareData.R')

```


# Weekly Analytics Report {.jumbotron} 
###### Generated On: `r format(Sys.time(), '%A, %d-%b-%Y')` {.text-muted}
###### Covering Period: `r covering_period` {.text-muted}


# About

This is a Weekly Analytics Report produced by [Aimia](www.aimia.com) for [Mobily](www.mobily.com.sa) covering Redemptions and Earn at Mobily. Its aim is to provide insights to Mobily apropos of redemptions and earn patterns, as observed on a weekly basis. Such insights could then possibly be used in marketing efforts or as springboard for further, directed analyses.

The structure of the report follows a general pattern of beginning with an overview of redemptions and earn, and then plunging into details and deeper levels of data to provide specific insights.  

This report consists of the following sections:

- [Redemption Analyses](#redemptionAnalysesSection)
    - [Overview of Redemptions](#overviewRedemptions)
    - [Summary of Mobily and Partner Redemptions](#summMobPartner)
    - [Summary of Prepaid and Postpaid Redemptions](#summPrePostpaid)
    - [Mobily Redemptions' Detailed View](#detailedMobilyRedemp)
    - [Partner Redemptions' Detailed View](#detailedPartnerRedemp)
    - [Redemptions split by Prepaid and Postpaid Packages](#redempPrePostpaid)
    - [Calendar Map of Redemptions](#calendarMap)
- [Customer Analyses](#customerAnalysesSection)
    - [Overview of New Customers](#newCustomers)
    - [Tier-wise View of Customers](#tierCustomers)


# Redemption Analyses {#redemptionAnalysesSection}


## Overview of Redemptions {#overviewRedemptions}

The following charts show figures for the *Total Redemptions*, *Total Points Redeemed*, and the *Average Points Redeemed*, across last several weeks.

```{r overview_Redemptions1, include = TRUE, dev = 'png', out.width=c('450px', '450px')}

source(file = '~/MobilyWeeklyReport/Analyses/overview_Redemptions1.R')

```


<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- Total redemptions `r df2.1.1$redempStatus` by `r df2.1.1$redempChange`% to `r redemptions`
- Points redeemed `r df2.1.1$ptsStatus` by `r df2.1.1$ptsChange`% to `r pointsRedeemed`
- Average points redeemed `r df2.1.1$avgPtsStatus` by `r df2.1.1$avgPtsChange`% to `r avgPtsRedeemed`
</div>

The following graphs show the *Number of redemptions* against *Mobily points denomination* available to customers.

```{r overview_Redemptions2, include = TRUE, dev = 'png', out.width=c('450px', '450px')}

source(file = '~/MobilyWeeklyReport/Analyses/overview_Redemptions2.R')

```

<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- Prepaid redemptions for `r df2.3.Prepaid$points_denomination[1]` points `r df2.3.Prepaid$status[1]` by `r df2.3.Prepaid$percentDiff[1]`% to `r df2.3.Prepaid$redempNumTidy[1]`
- Prepaid redemptions for `r df2.3.Prepaid$points_denomination[2]` points `r df2.3.Prepaid$status[2]` by `r df2.3.Prepaid$percentDiff[2]`% to `r df2.3.Prepaid$redempNumTidy[2]`
- Prepaid redemptions for `r df2.3.Prepaid$points_denomination[3]` points `r df2.3.Prepaid$status[3]` by `r df2.3.Prepaid$percentDiff[3]`% to `r df2.3.Prepaid$redempNumTidy[3]`
- Postpaid redemptions for `r df2.3.Postpaid$points_denomination[1]` points `r df2.3.Postpaid$status[1]` by `r df2.3.Postpaid$percentDiff[1]`% to `r df2.3.Postpaid$redempNumTidy[1]`
- Postpaid redemptions for `r df2.3.Postpaid$points_denomination[2]` points `r df2.3.Postpaid$status[2]` by `r df2.3.Postpaid$percentDiff[2]`% to `r df2.3.Postpaid$redempNumTidy[2]`
- Postpaid redemptions for `r df2.3.Postpaid$points_denomination[3]` points `r df2.3.Postpaid$status[3]` by `r df2.3.Postpaid$percentDiff[3]`% to `r df2.3.Postpaid$redempNumTidy[3]`
- Overall redemptions for `r df2.2.1$points_denomination[1]` points `r df2.2.1$redempDiffStatus[1]` by `r df2.2.1$redempDiff[1]`% to `r df2.2.1$redempNumTidy[1]`
- Overall redemptions for `r df2.2.1$points_denomination[2]` points `r df2.2.1$redempDiffStatus[2]` by `r df2.2.1$redempDiff[2]`% to `r df2.2.1$redempNumTidy[2]`
- Overall redemptions for `r df2.2.1$points_denomination[3]` points `r df2.2.1$redempDiffStatus[3]` by `r df2.2.1$redempDiff[3]`% to `r df2.2.1$redempNumTidy[3]`

</div>


## Summary of Mobily and Partner Redemptions {#summMobPartner}

The following charts show figures for the *Total Redemptions*, *Total Points Redeemed*, and the *Average Points Redeemed*, across last several weeks, but split by *Mobily* and *Partner* Redemptions.

```{r summary_MobPartner_Redemptions, include = TRUE, dev = 'png', out.width=c('450px', '450px')}

source(file = '~/MobilyWeeklyReport/Analyses/summary_MobPartner_Redemptions.R')

```


<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- Total Internal Redemptions `r df3.1.Mobily$redempStatus` by `r df3.1.Mobily$redempChange`% to `r df3.1.Mobily$redempNumTidy`
- Points redeemed for Internal Redemptions `r df3.1.Mobily$ptsStatus` by `r df3.1.Mobily$ptsChange`% to `r df3.1.Mobily$ptsNumTidy`
- Average points redeemed for Internal Redemptions `r df3.1.Mobily$avgPtsStatus` by `r df3.1.Mobily$avgPtsChange`% to `r df3.1.Mobily$avgNumTidy`
- Total Partner Redemptions `r df3.1.Partner$redempStatus` by `r df3.1.Mobily$redempChange`% to `r df3.1.Partner$redempNumTidy`
- Points redeemed for Partner Redemptions `r df3.1.Mobily$ptsStatus` by `r df3.1.Mobily$ptsChange`% to `r df3.1.Partner$ptsNumTidy`
- Average points redeemed for Partner Redemptions `r df3.1.Partner$avgPtsStatus` by `r df3.1.Partner$avgPtsChange`% to `r df3.1.Partner$avgNumTidy`

</div>


## Summary of Prepaid and Postpaid Redemptions {#summPrePostpaid}

The following charts show figures for the *Total Redemptions*, *Total Points Redeemed*, and the *Average Points Redeemed*, across last several weeks, but split by *Prepaid* and *Postpaid* segments.


```{r summary_PrePostpaid_Redemptions, include = TRUE, dev = 'png', out.width=c('450px', '450px')}

source(file = '~/MobilyWeeklyReport/Analyses/summary_PrePostpaid_Redemptions.R')

```


<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- Total Prepaid Redemptions `r df4.1$redempStatus[1]` by `r df4.1$redempChange[1]`% to `r df4.1$redempNumTidy[1]`
- Points redeemed by Prepaid customers `r df4.1$ptsStatus[1]` by `r df4.1$ptsChange[1]`% to `r df4.1$ptsNumTidy[1]`
- Average points redeemed by Prepaid customers `r df4.1$avgPtsStatus[1]` by `r df4.1$avgPtsChange[1]`% to `r df4.1$avgNumTidy[1]`
- Total Postpaid Redemptions `r df4.1$redempStatus[2]` by `r df4.1$redempChange[2]`% to `r df4.1$redempNumTidy[2]`
- Points redeemed by Postpaid customers `r df4.1$ptsStatus[2]` by `r df4.1$ptsChange[2]`% to `r df4.1$ptsNumTidy[2]`
- Average points redeemed by Postpaid customers `r df4.1$avgPtsStatus[2]` by `r df4.1$avgPtsChange[2]`% to `r df4.1$avgNumTidy[2]`

</div>


## Mobily Redemptions' Detailed View {#detailedMobilyRedemp}

```{r detailed_Mobily_Redemptions, include = TRUE, dev = 'png', fig.width = 8, fig.height = 4}

source(file = '~/MobilyWeeklyReport/Analyses/detailed_Mobily_Redemptions.R')

```


<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- Percentage of Prepaid redemptions for `r df5.1.Prepaid$item_sub_category[1]` `r df5.1.Prepaid$totRedemp_Status[1]` by `r df5.1.Prepaid$percent_totRedemp_Change[1]`% to `r df5.1.Prepaid$redempNumTidy[1]`
- Percentage of Prepaid redeemed points for `r df5.1.Prepaid$item_sub_category[1]` `r df5.1.Prepaid$totPts_Status[1]` by `r df5.1.Prepaid$percent_totPts_Change[1]`% to `r df5.1.Prepaid$ptsNumTidy[1]`
- Percentage of Prepaid redemptions for `r df5.1.Prepaid$item_sub_category[2]` `r df5.1.Prepaid$totRedemp_Status[2]` by `r df5.1.Prepaid$percent_totRedemp_Change[2]`% to `r df5.1.Prepaid$redempNumTidy[2]`
- Percentage of Prepaid redeemed points for `r df5.1.Prepaid$item_sub_category[2]` `r df5.1.Prepaid$totPts_Status[2]` by `r df5.1.Prepaid$percent_totPts_Change[2]`% to `r df5.1.Prepaid$ptsNumTidy[2]`
- Percentage of Postpaid redemptions for `r df5.1.Postpaid$item_sub_category[1]` `r df5.1.Postpaid$totRedemp_Status[1]` by `r df5.1.Postpaid$percent_totRedemp_Change[1]`% to `r df5.1.Postpaid$redempNumTidy[1]`
- Percentage of Postpaid redeemed points for `r df5.1.Postpaid$item_sub_category[1]` `r df5.1.Postpaid$totPts_Status[1]` by `r df5.1.Postpaid$percent_totPts_Change[1]`% to `r df5.1.Postpaid$ptsNumTidy[1]`
- Percentage of Postpaid redemptions for `r df5.1.Postpaid$item_sub_category[2]` `r df5.1.Postpaid$totRedemp_Status[2]` by `r df5.1.Postpaid$percent_totRedemp_Change[2]`% to `r df5.1.Postpaid$redempNumTidy[2]`
- Percentage of Postpaid redeemed points for `r df5.1.Postpaid$item_sub_category[2]` `r df5.1.Postpaid$totPts_Status[2]` by `r df5.1.Postpaid$percent_totPts_Change[2]`% to `r df5.1.Postpaid$ptsNumTidy[2]`

</div>


## Partner Redemptions' Detailed View {#detailedPartnerRedemp}

```{r detailed_Partner_Redemptions, include = TRUE, dev = 'png', fig.width = 8, fig.height = 6}

source('~/MobilyWeeklyReport/Analyses/detailed_Partner_Redemptions.R')

```


<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- Percentage of Prepaid redemptions for `r df6.1.Prepaid$item_sub_category[1]` `r df6.1.Prepaid$totRedemp_Status[1]` by `r df6.1.Prepaid$percent_totRedemp_Change[1]`% to `r df6.1.Prepaid$redempNumTidy[1]`
- Percentage of Prepaid redeemed points for `r df6.1.Prepaid$item_sub_category[1]` `r df6.1.Prepaid$totPts_Status[1]` by `r df6.1.Prepaid$percent_totPts_Change[1]`% to `r df6.1.Prepaid$ptsNumTidy[1]`
- Percentage of Prepaid redemptions for `r df6.1.Prepaid$item_sub_category[2]` `r df6.1.Prepaid$totRedemp_Status[2]` by `r df6.1.Prepaid$percent_totRedemp_Change[2]`% to `r df6.1.Prepaid$redempNumTidy[2]`
- Percentage of Prepaid redeemed points for `r df6.1.Prepaid$item_sub_category[2]` `r df6.1.Prepaid$totPts_Status[2]` by `r df6.1.Prepaid$percent_totPts_Change[2]`% to `r df6.1.Prepaid$ptsNumTidy[2]`
- Percentage of Postpaid redemptions for `r df6.1.Postpaid$item_sub_category[1]` `r df6.1.Postpaid$totRedemp_Status[1]` by `r df6.1.Postpaid$percent_totRedemp_Change[1]`% to `r df6.1.Postpaid$redempNumTidy[1]`
- Percentage of Postpaid redeemed points for `r df6.1.Postpaid$item_sub_category[1]` `r df6.1.Postpaid$totPts_Status[1]` by `r df6.1.Postpaid$percent_totPts_Change[1]`% to `r df6.1.Postpaid$ptsNumTidy[1]`
- Percentage of Postpaid redemptions for `r df6.1.Postpaid$item_sub_category[2]` `r df6.1.Postpaid$totRedemp_Status[2]` by `r df6.1.Postpaid$percent_totRedemp_Change[2]`% to `r df6.1.Postpaid$redempNumTidy[2]`
- Percentage of Postpaid redeemed points for `r df6.1.Postpaid$item_sub_category[2]` `r df6.1.Postpaid$totPts_Status[2]` by `r df6.1.Postpaid$percent_totPts_Change[2]`% to `r df6.1.Postpaid$ptsNumTidy[2]`
</div>



## Redemptions split by Prepaid and Postpaid Packages {#redempPrePostpaid}

The following graphs compare the redemption performance at Mobily against _Prepaid_ and _Postpaid_ packages. Further, the graphs also split the redemption performance for the packages into _Internal Redemption_ and _External/Partner Redemption_, to get a clearer picture of packages in terms of their redemption patterns.

```{r packages_PrePostpaid_Redemptions1, include = TRUE, dev = 'png', fig.width = 9, fig.height = 7, fig.align = 'center'}

source('~/MobilyWeeklyReport/Analyses/packages_PrePostpaid_Redemptions1.R')

```


<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- The Prepaid package with highest number of redemptions was `r highestPrepRedemp$package_name` which had `r highestPrepRedemp$total_redemp_format` redemptions.
- The Prepaid package with lowest number of redemptions was `r lowestPrepRedemp$package_name` which had `r lowestPrepRedemp$total_redemp_format` redemptions.
- The Postpaid package with highest number of redemptions was `r highestPostRedemp$package_name` which had `r highestPostRedemp$total_redemp_format` redemptions.
- The Postpaid package with lowest number of redemptions was `r lowestPostRedemp$package_name` which had `r lowestPostRedemp$total_redemp_format` redemptions.
- The Prepaid package with highest points redeemed was `r highestPrepPoints$package_name` which had `r highestPrepPoints$pts_redemp_format` redeemed points.
- The Postpaid package with highest points redeemed was `r highestPostPoints$package_name` which had `r highestPostPoints$pts_redemp_format` redeemed points.

</div>


```{r packages_PrePostpaid_Redemptions2, include = TRUE, dev = 'png', fig.width = 10, fig.height = 7, fig.align = 'center'}

source('~/MobilyWeeklyReport/Analyses/packages_PrePostpaid_Redemptions2.R')

```


<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- The Prepaid package with the highest number of _Internal_ redemptions was `r highestRedempIntPre$package_name`, which had `r highestRedempIntPre$total_redemp_format` redemptions
- The Prepaid package with the highest number of _Partner_ redemptions was `r highestRedempPartPre$package_name`, which had `r highestRedempPartPre$total_redemp_format` redemptions
- The Prepaid package with the lowest number of _Internal_ redemptions was `r lowestRedempIntPre$package_name`, which had `r lowestRedempIntPre$total_redemp_format` redemptions
- The Postpaid package with the highest number of _Internal_ redemptions was `r highestRedempIntPost$package_name`, which had `r highestRedempIntPost$total_redemp_format` redemptions
- The Postpaid package with the highest number of _Partner_ redemptions was `r highestRedempPartPost$package_name`, which had `r highestRedempPartPost$total_redemp_format` redemptions
- The Postpaid package with the lowest number of _Internal_ redemptions was `r lowestRedempIntPost$package_name`, which had `r lowestRedempIntPost$total_redemp_format` redemptions

</div>

## Calendar Map of Redemptions {#calendarMap}

To conclude this report, a high level recap of redemptions across a Calendar view is presented. Such charts are useful in identifying _redemption patterns_ across specific days.

```{r calendarMap_Redemptions, include = TRUE, dev = 'png', fig.width = 10, fig.height = 6}

source('~/MobilyWeeklyReport/Analyses/calendarMap_Redemptions.R')

```


# Customer Analyses {#customerAnalysesSection}

## Overview of New Customers {#newCustomers}

```{r new_Customers, include = TRUE, dev = 'png', fig.width = 10, fig.height = 6}

source('~/MobilyWeeklyReport/Analyses/new_Customers.R')

```

<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- Percentage of new customers for `r dfc1.1.1$pay_type_code[1]` segment `r dfc1.1.1$status[1]` by `r dfc1.1.1$percentTidy[1]`% to `r dfc1.1.1$custNumTidy[1]`
- Percentage of new customers for `r dfc1.1.2$pay_type_code[1]` segment `r dfc1.1.2$status[1]` by `r dfc1.1.2$percentTidy[1]`% to `r dfc1.1.2$custNumTidy[1]`

</div>


## Tier-wise View of Customers {#tierCustomers}

```{r tierwise_Customers, include = TRUE, dev = 'png', fig.width = 10, fig.height = 6}

source('~/MobilyWeeklyReport/Analyses/tier_Customers.R')

```


<div class="alert alert-dismissible alert-info">
In the previous week, ending at `r last_we_date`, the following was observed:

- Prepaid customers in Tier `r dfc1.2.1$tier[1]` were `r dfc1.2.1$custNumTidy[1]` in number, and comprised `r dfc1.2.1$relativeCust[1]`% of the total Prepaid customers (`r dfc1.2.1.1`)
- Prepaid customers in Tier `r dfc1.2.1$tier[2]` were `r dfc1.2.1$custNumTidy[2]` in number, and comprised `r dfc1.2.1$relativeCust[2]`% of the total Prepaid customers (`r dfc1.2.1.1`)
- Prepaid customers in Tier `r dfc1.2.1$tier[3]` were `r dfc1.2.1$custNumTidy[3]` in number, and comprised `r dfc1.2.1$relativeCust[3]`% of the total Prepaid customers (`r dfc1.2.1.1`)
- Prepaid customers in Tier `r dfc1.2.1$tier[4]` were `r dfc1.2.1$custNumTidy[4]` in number, and comprised `r dfc1.2.1$relativeCust[4]`% of the total Prepaid customers (`r dfc1.2.1.1`)
- Postpaid customers in Tier `r dfc1.2.2$tier[1]` were `r dfc1.2.2$custNumTidy[1]` in number, and comprised `r dfc1.2.2$relativeCust[1]`% of the total Postpaid customers (`r dfc1.2.2.1`)
- Postpaid customers in Tier `r dfc1.2.2$tier[2]` were `r dfc1.2.2$custNumTidy[2]` in number, and comprised `r dfc1.2.2$relativeCust[2]`% of the total Postpaid customers (`r dfc1.2.2.1`)
- Postpaid customers in Tier `r dfc1.2.2$tier[3]` were `r dfc1.2.2$custNumTidy[3]` in number, and comprised `r dfc1.2.2$relativeCust[3]`% of the total Postpaid customers (`r dfc1.2.2.1`)
- Postpaid customers in Tier `r dfc1.2.2$tier[4]` were `r dfc1.2.2$custNumTidy[4]` in number, and comprised `r dfc1.2.2$relativeCust[4]`% of the total Postpaid customers (`r dfc1.2.2.1`)

</div>

  
---
  
  
##### Weekly Analytics Report Generated by [Aimia](www.aimia.com) Analytics Team {.text-primary}



